#!/usr/bin/env python3
# This file is placed in the Public Domain.


import os, sys


wd =  os.getcwd()


sys.path.insert(0, wd)
sys.path.insert(0, os.path.join(wd, "lib"))


from genocide.scn import scan


mns = ["lib", "genocide", "bin/genocide", "bin/genocided", "bin/genocidecmd"]
txt = "E1121,E1101,E0102,R0801,R0001,C0413,C0412,C0414,C0201,C0209,C0415,C0301,C0413,W1505,W0603,W0622,W0611,W0212,W0703,W0613,R0915,R0912,R1732,R1710,R0201,R0903,R0902,C0411,C0116,C0114,C0115,C0103"


def popen(txt):
    for line in os.popen(txt).readlines():
        l = line.strip()
        if "Your code" in l:
            yield line.replace("\n", "")
        if ":" in l:
            yield line.replace("\n", "")          

def main():
    scan("genocide")
    for mn in mns:
        for line in popen("pylint --extension-pkg-whitelist=mdl -d %s %s" % (txt, mn)):
            print(line)

main()
