#!/usr/bin/env python3
# This file is placed in the Public Domain.


import os


os.environ["PYTHONPATH"] = "."


from op.utl import spl


skip = "rtfd,__,-,wipe,upenv,genocidectl"
txt = "E1121,E1101,E0102,R0801,R0001,C0413,C0412,C0414,C0201,C0209,C0415,C0301,C0413,W1505,W0603,W0622,W0212,W0703,W0613,R0915,R0912,R1732,R1710,R0201,R0903,R0902,C0411,C0116,C0114,C0115,C0103"


def popen(text):
    for line in os.popen(text).readlines():
        l = line.strip()
        if "Your code" in l:
            continue
        if ":" in l:
            yield l.replace("\n", "")


def payload(pn):
    for fn in os.listdir(pn):
        if fn.endswith("~"):
            continue
        next = False
        for s in spl(skip):
            if s in fn:
                next = True
        if next:
            continue
        mn = fn.split(os.sep)[-1]
        for line in popen("pylint -d %s %s/%s" % (txt, pn, mn)):
            print(line)


def main():
    payload("genocide")
    payload("test")
    payload("bin")
    payload("dev")


main()
