#!/usr/bin/env python3
# This file is placed in the Public Domain.


"Prosector. Reconsider. OTP-CR-117/19."


import time


from obj import Config


Config.console = False
Config.name = "genocide"
Config.services = False
Config.workdir = "/var/lib/genocide/"


from genocide.irc import Config as IRCConfig


IRCConfig.channel = "#genocide"
IRCConfig.nick = "genocide"
IRCConfig.realname = "prosector. court. reconsider OTP-CR-117/19 (article 15)."
IRCConfig.username = "genocide"


from obj import keys
from hdl import Callbacks, Commands, dispatch


from genocide.irc import IRC
from genocide.rss import Fetcher
from genocide.scn import init


def cmd(event):
    event.reply(",".join(sorted(keys(Commands.cmd))))


Commands.add(cmd)

def main():
    Callbacks.add("command", dispatch)
    i = IRC()
    i.start()
    f = Fetcher()
    f.start()
    init("genocide.mdl")
    while 1:
        time.sleep(1.0)


main()
