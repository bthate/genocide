#!/usr/bin/env python3
# This file is placed in the Public Domain.


"bot command"


import sys


from op.obj import Cfg, keys
from op.run import CLI, Commands, Table, parse_cli


Cfg.workdir = "/var/lib/genocide/"


from genocide import fnd, irc, log, mdl, rss, sts, tdo


Table.add(fnd)
Table.add(irc)
Table.add(log)
Table.add(mdl)
Table.add(rss)
Table.add(sts)
Table.add(tdo)


allmod =  ",".join(keys(Table.mod))


class CLI(CLI):

    def raw(self, txt):
        print(txt)
        sys.stdout.flush()


def cmd(event):
    event.reply(",".join(sorted(Commands.cmd)))


def main():
    Table.scan()
    Commands.add(cmd)
    parse_cli(" ".join(sys.argv[1:]))
    c = CLI()
    return c.cmd(" ".join(sys.argv[1:]))


main()
